<div fxLayoutAlign="center center">
  <mat-form-field fxFlex="40%">
    <input matInput type="text" (keyup)="doFilter($event.target.value)" placeholder="Filter">
  </mat-form-field>
</div>

<div class="table-container" style="width: 100%; border: 2px solid red;">
  <table
    mat-table [dataSource]="dataSource" 
    matSort 
    class="mat-elevation-z8" 
    style="width: 100%">

    <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->

    <!-- Position Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Client info</th>
      <td mat-cell *matCellDef="let element"><br>
        <div class="client-name-container">
          {{element.Order.orderInfo.clientName}} <br>
        </div>
        Phone: {{element.Order.orderInfo.clientPhone}}<br>
        Email: {{element.Order.orderInfo.clientEmail}}<br>
        Zegels: {{element.Order.orderInfo.stamps}}<br>
        OrderId: {{element.orderId}}
    </ng-container>

    <ng-container matColumnDef="pickupDate">
      <th class="pickup-date-header" mat-header-cell *matHeaderCellDef> Pickup Date </th>
      <td class="pickup-date-cell" *matCellDef="let element"> {{element.extractedPickupDate}} </td>
      <!-- <td class="pickup-date-cell" *matCellDef="let element"> {{element.Order.orderInfo.pickupDate}} </td> -->
    </ng-container>

    <ng-container matColumnDef="newTime">
      <th class="pickup-date-header" mat-sort-header mat-header-cell *matHeaderCellDef>Pickup time</th>
      <td class="pickup-date-cell" *matCellDef="let element"> {{element.extractedTimeslot}} </td>
    </ng-container>

    <div class="order-container">
      <ng-container matColumnDef="orders">
        <mat-header-cell class="header-cell-order" *matHeaderCellDef>Orders</mat-header-cell>
        <mat-cell class="cell-order" *matCellDef="let element">
          <table
            id="myTable" 
            class="order-table"
            style="border: 1px solid green; width: 100%">
            <tr>
              <th class="table-header table-header-article">TYPE</th>
              <th class="table-header table-header-name">NAME</th>
              <th class="table-header table-header-weight">WGT.</th>
              <th class="table-header table-header-capacity">CAP.</th>
              <th class="table-header table-header-brew">BREW</th>
              <th class="table-header table-header-mill">MILL</th>
              <th class="table-header table-header-mill">GRIND</th>
            </tr>
            <tr *ngFor="let order of element.Order.orderedItems">
              <td class="table-cell-article">{{order.type | titlecase}}</td>
              <td class="table-cell-name">{{order.nameAndPrice | titlecase}}</td>
              <td class="table-cell-weight">{{order.weightUnit | number }} gr.</td>
              <td class="table-cell-capacity">{{order.capacity | titlecase}}</td>
              <td class="table-cell-brew">{{order.brewMethod | titlecase}}</td>
              <td class="table-cell-mill">{{order.mill | titlecase}}</td>
              <td class="table-cell-mill">{{order.grindSize}}</td>
            </tr>
          </table>
        </mat-cell>
      </ng-container>
    </div>

    <ng-container matColumnDef="price">
      <th class="table-header-price" mat-header-cell *matHeaderCellDef> Price </th>
      <td class="table-cell-price" mat-cell *matCellDef="let element"> {{element.Order.finalPrice | currency:'EUR'}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>
